<!DOCTYPE html>
<html lang="en">

<head>
  <title>Void | Home</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Welcome to the official website of Void. Social Network for a World of Problem-Solvers." />
  <meta name="author" content="Shoaib Ali" />
  <link rel="icon" type="image/png" href="images.png">
  
  
  <meta property="og:title" content="Void | by SAK" />
  <meta property="og:description" content="Social Network for a World of Problem-Solvers." />
  <meta property="og:image" content="https://shoaibali43.github.io/website/logo.png" />
  <meta property="og:url" content="https://shoaibali43.github.io/website" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Void" />
  
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Void | by SAK" />
  <meta name="twitter:description" content="Social Network for a World of Problem-Solvers." />
  <meta name="twitter:image" content="https://shoaibali43.github.io/website/logo.png" />
  <meta name="twitter:site" content="@exploremiracles" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }

    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #ec4899;
      --dark: #1f2937;
      --light: #f9fafb;
      --gray: #9ca3af;
      --success: #10b981;
      --error: #ef4444;
      --card-bg: #ffffff;
      --sidebar-bg: #1f2937;
      --content-bg: #f3f4f6;
      --solved: #10b981;
    }

    body {
      background: linear-gradient(120deg, #0A0A0A, #0D1B2A, #000000);
      background-size: cover;
      background-repeat: no-repeat;
      color: var(--dark);
      min-height: 100vh;
      display: flex;
    }

    
    .spinner {
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-left-color: #d1a152;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 2rem auto;
      display: none;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    
    .sidebar {
      width: 260px;
      background: transparent;
      color: white;
      height: 100vh;
      position: fixed;
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      transition: all 0.3s ease;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .sidebar::-webkit-scrollbar {
      width: 6px;
    }

    .sidebar::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
    }

    .sidebar::-webkit-scrollbar-track {
      background: transparent;
    }

    .logo {
      display: flex;
      align-items: center;
      margin-bottom: 2rem;
      padding: 0 0.5rem;
    }

    .logo i {
      font-size: 2rem;
      color: wheat;
      margin-right: 0.75rem;
    }

    .logo h1 {
      font-size: 1.5rem;
      font-weight: 700;
      color: wheat;
    }

    .nav-item {
      display: flex;
      align-items: center;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .nav-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .nav-item.active {
      background: rgba(245, 222, 179, 0.527);
    }

    .nav-item i {
      margin-right: 0.75rem;
      font-size: 1.25rem;
    }

    .nav-item span {
      font-weight: 500;
    }

    .trending-tags {
      margin-top: 2rem;
    }

    .trending-tags h3 {
      font-size: 1rem;
      margin-bottom: 1rem;
      padding: 0 0.5rem;
      color: var(--gray);
    }

    .tag {
      display: inline-block;
      background: rgba(99, 102, 241, 0.2);
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 20px;
      margin: 0.25rem;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .tag:hover {
      background: var(--primary);
    }

    .user-section {
      margin-top: auto;
      padding: 1rem 0.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .user-info {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, #469c1e, #000000);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 0.75rem;
      font-weight: bold;
      font-size: 1.2rem;
    }

    .logout-btn {
      width: 100%;
      padding: 0.75rem;
      background: rgba(239, 68, 68, 0.2);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logout-btn:hover {
      background: rgba(239, 68, 68, 0.3);
    }

    .logout-btn i {
      margin-right: 0.5rem;
    }

    
    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 2rem;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .search-bar {
      display: flex;
      align-items: center;
      background: white;
      border-radius: 12px;
      padding: 0.5rem 1rem;
      width: 300px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .search-bar i {
      color: var(--gray);
      margin-right: 0.5rem;
    }

    .search-bar input {
      border: none;
      outline: none;
      width: 100%;
      font-size: 1rem;
    }

.page-title.minimal {
    background: linear-gradient(135deg, rgb(247, 211, 146), rgb(252, 215, 146));
    background-size: 200% auto;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: 
        minimalEntrance 1s ease-out forwards,
        minimalShimmer 4s ease-in-out infinite;
    padding: 0.25rem 0.5rem;
}

@keyframes minimalEntrance {
    0% {
        opacity: 0;
        transform: translateX(-20px);
        letter-spacing: 5px;
    }
    100% {
        opacity: 1;
        transform: translateX(0);
        letter-spacing: normal;
    }
}

@keyframes minimalShimmer {
    0%, 100% {
        background-position: 0% center;
        filter: brightness(1);
    }
    50% {
        background-position: 100% center;
        filter: brightness(1.2);
    }
}

.page-title.minimal::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 50%;
    width: 0;
    height: 1px;
    background: wheat;
    animation: minimalUnderline 1.2s ease-out 0.5s forwards;
}

@keyframes minimalUnderline {
    0% {
        width: 0;
        left: 50%;
    }
    100% {
        width: 100%;
        left: 0;
    }
}


    
    .create-post {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      margin-bottom: 2rem;
      box-shadow:
        0 4px 12px rgba(0, 0, 0, 0.08),
        0 8px 24px rgba(0, 0, 0, 0.06);
      overflow: hidden;
      transition: all 0.4s ease;
    }

    .create-post-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      cursor: pointer;
    }

    .create-post-header h3 {
      margin: 0;
      font-size: 1.2rem;
      color: white;
    }

    .collapse-icon i {
      transition: transform 0.3s ease;
      font-size: 1.2rem;
      color: white;
    }

    
    .create-post.expanded .collapse-icon i {
      transform: rotate(180deg);
    }

    
    .create-post-body {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease, padding 0.5s ease;
      padding: 0 1.5rem;
    }

    .create-post.expanded .create-post-body {
      max-height: 500px;
      padding: 1rem 1.5rem;
    }

    
    .post-input,
    .tags-input {
      width: 100%;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      color: white;
      transition: border-color 0.3s ease;
      resize: none;
      overflow: hidden;
      box-sizing: border-box;
      font-size: medium;
    }

    .post-input:focus,
    .tags-input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .post-btn {
      background-color: #d1a152;
      color: white;
      border: none;
      border-radius: 12px;
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
    }

    .post-btn:hover {
      background-color: #eba739;
    }

    textarea::placeholder {
      color: rgb(207, 207, 207);
    }

    input::placeholder {
      color: rgb(207, 207, 207);
    }

    .tag-hint {
      color: rgba(255, 255, 255, 0.76);
    }

    
    .problem-feed {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .problem-card {
      background: rgba(18, 18, 18, 0.7);
      backdrop-filter: blur(12px);
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow:
        0 4px 10px rgba(0, 0, 0, 0.25),
        0 8px 24px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .problem-card:hover {
      transform: translateY(-4px);
      box-shadow:
        0 8px 20px rgba(0, 0, 0, 0.3),
        0 12px 40px rgba(0, 0, 0, 0.25),
        0 0 20px rgba(255, 255, 255, 0.05);
    }

    .problem-card.solved {
      border-left: 4px solid var(--solved);
    }

    .problem-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }

    .avatar-wrapper {
      position: relative;
      display: inline-block;
    }

    .problem-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, #469c1e, #000000);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 0.75rem;
      color: white;
      font-weight: bold;
      font-size: 18px;
      position: relative;
    }

    .verified-badge {
      position: absolute;
      top: -4px;
      right: 8px;
      width: 16px;
      height: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      border: 0.2px solid white;
      background-color: #AB2330;
    }

    .problem-user {
      font-weight: 600;
      color: wheat;
    }

    .problem-time {
      color: white;
      font-size: 0.85rem;
      margin-left: auto;
    }

    .problem-content {
      margin-bottom: 1rem;
      line-height: 1.6;
      color: white;
    }

    .problem-tags {
      display: flex;
      flex-wrap: wrap;
      margin-bottom: 1rem;
      gap: 0.5rem;
    }

    .problem-tag {
      background: rgba(99, 102, 241, 0.1);
      color: var(--primary);
      padding: 0.3rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .problem-tag:hover {
      background: var(--primary);
      color: white;
    }

    .problem-actions {
      display: flex;
      gap: 1rem;
      border-top: 1px solid #e5e7eb;
      padding-top: 1rem;
    }

    .action-btn {
      display: flex;
      align-items: center;
      background: none;
      border: none;
      color: var(--gray);
      cursor: pointer;
      transition: all 0.2s;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
    }

    .action-btn:hover {
      color: var(--primary);
      background: rgba(99, 102, 241, 0.1);
    }

    .action-btn i {
      margin-right: 0.5rem;
    }

    .action-btn.liked {
      color: var(--error);
    }

    .action-btn.upvoted {
      color: var(--success);
    }

    .action-btn.solved {
      color: var(--solved);
    }

    .action-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .action-btn.bookmarked {
      color: var(--primary);
    }

    .solved-badge {
      position: absolute;
      bottom: 0.5rem;
      right: 1.5rem;
      background: var(--solved);
      color: white;
      padding: 0.3rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    
    .answers {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e7eb;
    }

    .answer-form {
      display: flex;
      margin-bottom: 1rem;
    }

    .answer-input {
      flex: 1;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      padding: 0.75rem;
      font-size: 1rem;
      margin-right: 0.5rem;
      min-height: 50px;
      resize: none;
      overflow: hidden;
      box-sizing: border-box;
        }

    .answer-input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .answer-btn {
      background-color: #d1a152;
      color: white;
      border: none;
      border-radius: 12px;
      padding: 0 1.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .answer-btn:hover {
      background-color: #eeaa3d;
    }

    .answer-card {
      background: #f9fafb;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .answer-header {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .answer-user {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .answer-time {
      color: var(--gray);
      font-size: 0.8rem;
      margin-left: auto;
    }

    .answer-content {
      font-size: 0.95rem;
      line-height: 1.5;
    }
 .menu-toggle {
      display: none;
    }
    
    @media (max-width: 992px) {
      .sidebar {
        width: 80px;
        padding: 1rem 0.5rem;
      }

      .logo h1,
      .nav-item span,
      .trending-tags,
      .user-info span {
        display: none;
      }

      .logo {
        justify-content: center;
      }

      .logo i {
        margin-right: 0;
      }

      .nav-item {
        justify-content: center;
        padding: 0.75rem;
      }

      .nav-item i {
        margin-right: 0;
      }

      .main-content {
        margin-left: 80px;
      }
      .logout-btn span{
                display: none;

            }
    }

    @media (max-width: 768px) {
      .main-content {
        padding: 1rem;
        margin-left: 0;
      }

     .sidebar {
    width: 260px; 
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  
  .sidebar.active {
    transform: translateX(0);
    z-index: 1200;
    background-color: #000000;
  }

  .sidebar.active .trending-tags {
    display: block; 
  }
  .user-info span {
    display: inline;
  }

  
  .nav-item {
    justify-content: flex-start; 
    padding: 0.75rem 1rem; 
  }

  
  .nav-item span {
    display: inline; 
    margin-left: 0.75rem; 
  }
  .problem-card {
      padding: 1rem;
     font-size: 14px;
  }

  
  .menu-toggle {
    display: flex;
  }
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }

      .search-bar {
        width: 100%;
      }

      .menu-toggle {
        display: block;
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1100;
        color: wheat;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }
      .logout-btn {
    justify-content: center;
      }

      .solved-badge {
        position: relative;
        top: 0;
        right: 0;
        margin-bottom: 0.5rem;
        align-self: flex-start;
      }
      .action-btn {
        font-size: 10px;
      }
      .page-title {
        font-size: 1.5rem;
        padding: 0.25rem 0.5rem;
    }
    
    .page-title::before {
        top: -5px;
        left: -5px;
        right: -5px;
        bottom: -5px;
    }
      
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .problem-card {
      animation: fadeIn 0.4s ease;
    }

    
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 8px;
      background: var(--dark);
      color: white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      display: flex;
      align-items: center;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    .toast i {
      margin-right: 10px;
    }

    .toast.success {
      background: var(--success);
    }

    .toast.error {
      background: var(--error);
    }

   #scrollTopBtn {
  display: none;
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 99;
  color: wheat;
  border: none;
  padding: 12px;
  border-radius: 20%;
  font-size: 10px;
  cursor: pointer;
  transition: background 0.3s;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);

  /* Transparent blurred background */
  background-color: rgba(255, 255, 255, 0.1); /* slight tint so blur is visible */
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}


    #scrollTopBtn:hover {
      background-color: rgb(243, 188, 85);
    }
  </style>
</head>

<body>
  
  <div class="menu-toggle" id="menuToggle">
  <i class="fa-solid fa-cube"></i>
  </div>

  
  <div class="toast" id="toast"></div>

  
  <div class="sidebar" id="sidebar">
    <div class="logo">
      <i class="fa-solid fa-cube"></i>
      <h1> Void</h1>
    </div>

    <div class="nav-item active">
      <i class="fas fa-home"></i>
      <span>Home</span>
    </div>

    <a href="users.html" style="color: inherit; text-decoration: none;">
    <div class="nav-item">
      <i class="fas fa-users"></i>
      <span>Users</span>
    </div>
    </a>

<a href="chain.html" style="color: inherit; text-decoration: none;">
    <div class="nav-item">
      <i class="fas fa-link"></i>
      <span>Synaptic Chain</span>
    </div>
    </a>

<a href="profile.html" style="color: inherit; text-decoration: none;">
    <div class="nav-item">
      <i class="fas fa-user"></i>
      <span>My Profile</span>
    </div>
    </a>

    <a href="timeline.html" style="color: inherit; text-decoration: none;">
    <div class="nav-item">
      <i class="fas fa-calendar-alt"></i>
      <span>Timeline</span>
    </div>
    </a>

    <a href="status.html" style="color: inherit; text-decoration: none;">
    <div class="nav-item">
      <i class="fa-solid fa-water"></i>
      <span>Wave</span>
    </div>
    </a>

    <a href="Saved.html" style="color: inherit; text-decoration: none;">
    <div class="nav-item">
      <i class="fa-solid fa-dna"></i>
      <span>Sequence</span>
    </div>
    </a>

    <a href="personal.html" style="color: inherit; text-decoration: none;">
      <div class="nav-item">
        <i class="fas fa-sticky-note"></i>
        <span>My Personal Space</span>
      </div>
    </a>

<a href="articles.html" style="color: inherit; text-decoration: none;">
    <div class="nav-item">
      <i class="fas fa-book-open"></i>
    <span>Research Library</span>
    </div>
    </a>

    <a href="node.html" style="color: inherit; text-decoration: none;">
      <div class="nav-item">
        <i class="fas fa-solid fa-cube"></i>
        <span>Mind Lattice</span>
      </div>
    </a>

    <hr style="margin: 0; border: 0; border-top: 1px solid #ccc;">

    <a href="time.html" style="color: inherit; text-decoration: none; font-size: 14px;">
    <div class="nav-item">
      <i class="fas fa-clock" style="font-size: 14px;"></i>
      <span>Time Insights</span>
    </div>
    </a>

<a href="feature.html" style="color: inherit; text-decoration: none; font-size: 14px;">
    <div class="nav-item">
      <i class="fas fa-lightbulb" style="font-size: 14px;"></i>
      <span>Feature Requests</span>
    </div>
    </a>

    <a href="settings.html" style="color: inherit; text-decoration: none;font-size: 14px;">
    <div class="nav-item">
      <i class="fas fa-cog" style="font-size: 14px;"></i>
      <span>Settings</span>
    </div>
    </a>

<a href="about.html" style="color: inherit; text-decoration: none;font-size: 14px;">
  <div class="nav-item">
    <i class="fa-solid fa-terminal" style="font-size: 14px;"></i>
    <span>About</span>
  </div>
</a>

    <div class="trending-tags">
      <h3>Trending Tags</h3>
      <div id="trending-tags-container">
        <div class="tag">#loading...</div>
      </div>
    </div>

    <div class="user-section">
      <div class="user-info">
        <div class="user-avatar" id="user-avatar">SA</div>
        <span id="sidebar-username">Loading...</span>
      </div>
      <button class="logout-btn" id="logoutBtn">
        <i class="fas fa-sign-out-alt"></i>
        <span>Log Out</span>
      </button>
    </div>
  </div>

  
  <div class="main-content">
    <div class="header">
      <h2 class="page-title minimal">Problem Feed</h2>
      <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" id="searchInput" placeholder="Search problems or topics...">
      </div>
    </div>

    
    <div class="create-post" id="createPost">
      <div class="create-post-header" id="togglePost">
        <h3>Post a Problem <i class="fa fa-pencil"></i></h3>
        <div class="collapse-icon">
          <i class="fa fa-angle-down"></i>
        </div>
      </div>
      <div class="create-post-body">
        <textarea class="post-input" id="problemInput" placeholder="Describe your problem or challenge..."></textarea>
        <input type="text" class="tags-input" id="tagsInput" placeholder="Add tags (e.g., #technology, #science)">
        <div class="post-actions">
          <div class="tag-hint">Add hashtags to categorize your problem</div>
          <button class="post-btn" id="postBtn">Post Problem</button>
        </div>
      </div>
    </div>

    
    <div class="spinner" id="loadingSpinner"></div>

    
    <div class="problem-feed" id="problemFeed">
      
    </div>
  </div>

  <button id="scrollTopBtn" onclick="scrollToTop()">
  <i class="fa-solid fa-turn-up"></i>
  </button>

  
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script>

  const currentPage = "dashboard";
  let startTime = Date.now();

  // Load previous value
  let storedTime = parseInt(localStorage.getItem(`time_${currentPage}`)) || 0;

  // Track today's time
  const today = new Date().toDateString();
  let todayStoredTime = parseInt(localStorage.getItem(`time_${currentPage}_${today}`)) || 0;

  setInterval(() => {
    let secondsOnPage = Math.floor((Date.now() - startTime) / 1000);

    // Update total time for this page
    storedTime += secondsOnPage;
    localStorage.setItem(`time_${currentPage}`, storedTime);

    // Update today's time
    todayStoredTime += secondsOnPage;
    localStorage.setItem(`time_${currentPage}_${today}`, todayStoredTime);

    // Reset start time
    startTime = Date.now();
  }, 10000);

  window.addEventListener('beforeunload', () => {
    let secondsOnPage = Math.floor((Date.now() - startTime) / 1000);
    storedTime += secondsOnPage;
    todayStoredTime += secondsOnPage;

    localStorage.setItem(`time_${currentPage}`, storedTime);
    localStorage.setItem(`time_${currentPage}_${today}`, todayStoredTime);
  });

    // Firebase Configuration (replace with your actual config)
    const firebaseConfig = {
     apiKey: "AIzaSyAxQoFW6QiaazIcvkEPsYbnTv7zfKe8c-Y",
      authDomain: "patternetweb.firebaseapp.com",
      projectId: "patternetweb",
      storageBucket: "patternetweb.firebasestorage.app",
      messagingSenderId: "78400752693",
      appId: "1:78400752693:web:540fbbcab615e6b078b57c"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Global variables
    let currentUser = null;
    let problems = [];
    let problemsListener = null;
    let userVotes = {};
    let userBookmarks = {};
    let trendingTags = [];

    // DOM Elements
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    const problemInput = document.getElementById('problemInput');
    const tagsInput = document.getElementById('tagsInput');
    const postBtn = document.getElementById('postBtn');
    const problemFeed = document.getElementById('problemFeed');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const logoutBtn = document.getElementById('logoutBtn');
    const searchInput = document.getElementById('searchInput');
    const userAvatar = document.getElementById('user-avatar');
    const sidebarUsername = document.getElementById('sidebar-username');
    const toast = document.getElementById('toast');
    const trendingTagsContainer = document.getElementById('trending-tags-container');

    problemInput.addEventListener("input", function () {
      this.style.height = "auto";
      this.style.height = this.scrollHeight + "px";
    });

    postBtn.addEventListener("click", function () {
        problemInput.style.height = "";
      });

    const createPost = document.getElementById('createPost');
    const togglePost = document.getElementById('togglePost');

    togglePost.addEventListener('click', () => {
      createPost.classList.toggle('expanded');
    });

    // Initialize the application
    function initApp() {
      // Check authentication state
      auth.onAuthStateChanged(async (user) => {
        if (user) {
          currentUser = user;
          console.log('User signed in:', user.uid);

          // Get user data from Firestore
          try {
            const userDoc = await db.collection('users').doc(user.uid).get();
            if (userDoc.exists) {
              const userData = userDoc.data();
              displayUserInfo(userData);
              loadUserVotes();
              loadUserBookmarks();
              loadProblems();
              loadTrendingTags();
            } else {
              showToast('User data not found. Please log in again.', 'error');
              setTimeout(() => {
                window.location.href = 'indexz.html';
              }, 2000);
            }
          } catch (error) {
            console.error('Error getting user document:', error);
            showToast('Error loading user data', 'error');
          }
        } else {
          // No user is signed in, redirect to login
          window.location.href = 'indexz.html';
        }
      });

      // Set up event listeners
      menuToggle.addEventListener('click', toggleSidebar);
      postBtn.addEventListener('click', postProblem);
      logoutBtn.addEventListener('click', logout);
      searchInput.addEventListener('input', filterProblems);
    }

    // Display user information in the sidebar
    function displayUserInfo(userData) {
      const username = userData.username || 'User';
      userAvatar.textContent = username.charAt(0).toUpperCase();
      sidebarUsername.textContent = username;
    }

    // Load user's votes from Firestore
    async function loadUserVotes() {
      try {
        const votesSnapshot = await db.collection('votes')
          .where('userId', '==', currentUser.uid)
          .get();

        userVotes = {};
        votesSnapshot.forEach(doc => {
          const voteData = doc.data();
          userVotes[voteData.problemId] = voteData.voteType;
        });

        console.log('User votes loaded:', userVotes);
      } catch (error) {
        console.error('Error loading user votes:', error);
      }
    }

    // Load user's bookmarks from Firestore
    async function loadUserBookmarks() {
      try {
        const bookmarksSnapshot = await db.collection('bookmarks')
          .where('userId', '==', currentUser.uid)
          .get();

        userBookmarks = {};
        bookmarksSnapshot.forEach(doc => {
          const bookmarkData = doc.data();
          userBookmarks[bookmarkData.problemId] = {
            id: doc.id,
            ...bookmarkData
          };
        });
      } catch (error) {
        console.error('Error loading user bookmarks:', error);
      }
    }

    // Load trending tags from all problems
    async function loadTrendingTags() {
      try {
        const problemsSnapshot = await db.collection('problems').get();
        const tagCounts = {};

        problemsSnapshot.forEach(doc => {
          const problem = doc.data();
          if (problem.tags && Array.isArray(problem.tags)) {
            problem.tags.forEach(tag => {
              tagCounts[tag] = (tagCounts[tag] || 0) + 1;
            });
          }
        });

        const tagArray = Object.entries(tagCounts).map(([tag, count]) => ({ tag, count }));
        tagArray.sort((a, b) => b.count - a.count);

        trendingTags = tagArray.slice(0, 6).map(item => item.tag);
        updateTrendingTagsUI();
      } catch (error) {
        console.error('Error loading trending tags:', error);
        trendingTags = ['technology', 'science', 'programming', 'math', 'design', 'business'];
        updateTrendingTagsUI();
      }
    }

    // Update the trending tags UI
    function updateTrendingTagsUI() {
      trendingTagsContainer.innerHTML = '';

      if (trendingTags.length === 0) {
        trendingTagsContainer.innerHTML = '<div class="tag">No tags yet</div>';
        return;
      }

      trendingTags.forEach(tag => {
        const tagElement = document.createElement('div');
        tagElement.className = 'tag';
        tagElement.textContent = `#${tag}`;
        tagElement.setAttribute('data-tag', tag);

        tagElement.addEventListener('click', () => {
          searchInput.value = tag;
          filterProblems();
        });

        trendingTagsContainer.appendChild(tagElement);
      });
    }

    // Toggle sidebar on mobile
    function toggleSidebar() {
      sidebar.classList.toggle('active');
    }

    // Show toast notification
    function showToast(message, type = '') {
      toast.textContent = message;
      toast.className = 'toast';
      if (type) toast.classList.add(type);
      toast.classList.add('show');

      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Load problems from Firestore
    function loadProblems() {
      loadingSpinner.style.display = 'block';
      problemFeed.innerHTML = '';

      problemsListener = db.collection('problems')
        .orderBy('createdAt', 'desc')
        .onSnapshot(snapshot => {
          problems = [];
          snapshot.forEach(doc => {
            problems.push({ id: doc.id, ...doc.data() });
          });
          renderProblems();
          loadingSpinner.style.display = 'none';
          loadTrendingTags();
        }, error => {
          console.error('Error getting problems:', error);
          showToast('Error loading problems', 'error');
          loadingSpinner.style.display = 'none';
        });
    }

    // Render problems to the UI
    function renderProblems() {
      problemFeed.innerHTML = '';

      if (problems.length === 0) {
        problemFeed.innerHTML = `
          <div class="problem-card">
            <div class="problem-content">
              <p>No problems found. Be the first to post one!</p>
            </div>
          </div>
        `;
        return;
      }

      problems.forEach(problem => {
        const problemElement = createProblemElement(problem);
        problemFeed.appendChild(problemElement);
      });
    }

    // Create DOM element for a problem
    function createProblemElement(problem) {
      const problemDate = problem.createdAt ? problem.createdAt.toDate() : new Date();
      const timeAgo = getTimeAgo(problemDate);

      const userVote = userVotes[problem.id] || null;
      const upvoted = userVote === 'upvote';
      const downvoted = userVote === 'downvote';

      const isSolved = problem.solved || false;
      const isProblemOwner = problem.userId === currentUser.uid;
      const isBookmarked = userBookmarks[problem.id] || false;

      const problemElement = document.createElement('div');
      problemElement.className = `problem-card ${isSolved ? 'solved' : ''}`;
      problemElement.innerHTML = `
        <div class="problem-header">
          <div class="avatar-wrapper">
            <div class="problem-avatar">${problem.userName ? problem.userName.charAt(0).toUpperCase() : 'U'}</div>
            <span class="verified-badge">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="12" height="12" fill="white">
                <circle cx="12" cy="12" r="12" fill="#AB2330"></circle>
                <path d="M10.2 15.3l-3-3 1.4-1.4 1.6 1.6 4.6-4.6 1.4 1.4-6 6z" fill="white"></path>
              </svg>
            </span>
          </div>
          <div class="problem-user">${problem.userName || 'Unknown User'}</div>
          <div class="problem-time">${timeAgo}</div>
        </div>
        <div class="problem-content">
          <p>${problem.content}</p>
        </div>
        <div class="problem-tags">
          ${problem.tags ? problem.tags.map(tag =>
        `<div class="problem-tag" data-tag="${tag}">#${tag}</div>`
      ).join('') : ''}
        </div>
        ${isSolved ? `<div class="solved-badge"><i class="fas fa-check-circle"></i> Solved</div>` : ''}
        <div class="problem-actions">
          <button class="action-btn upvote-btn ${upvoted ? 'upvoted' : ''} ${userVote ? 'disabled' : ''}" data-id="${problem.id}">
            <i class="fas fa-arrow-up"></i>
            <span>${problem.upvotes || 0}</span>
          </button>
          <button class="action-btn downvote-btn ${downvoted ? 'liked' : ''} ${userVote ? 'disabled' : ''}" data-id="${problem.id}">
            <i class="fas fa-arrow-down"></i>
            <span>${problem.downvotes || 0}</span>
          </button>
          <button class="action-btn comment-btn" data-id="${problem.id}">
            <i class="far fa-comment"></i>
            <span>${problem.answerCount || 0} Answers</span>
          </button>
          ${isProblemOwner ? `
          <button class="action-btn solve-btn ${isSolved ? 'solved' : ''}" data-id="${problem.id}">
            <i class="fas fa-check-circle"></i>
            <span>${isSolved ? 'Solved' : 'Mark Solved'}</span>
          </button>
          ` : ''}
          <button class="action-btn bookmark-btn ${isBookmarked ? 'bookmarked' : ''}" data-id="${problem.id}">
            <i class="${isBookmarked ? 'fas' : 'far'} fa-solid fa-dna"></i>
          </button>
        </div>
        <div class="answers" id="answers-${problem.id}" style="display: none;">
          <div class="answer-form">
            <textarea class="answer-input" id="answer-input-${problem.id}" placeholder="Post your solution..."></textarea>
            <button class="answer-btn" data-id="${problem.id}">Answer</button>
          </div>
          <div class="answers-container" id="answers-container-${problem.id}">
            
          </div>
        </div>
      `;

      const upvoteBtn = problemElement.querySelector('.upvote-btn');
      const downvoteBtn = problemElement.querySelector('.downvote-btn');
      const commentBtn = problemElement.querySelector('.comment-btn');
      const solveBtn = problemElement.querySelector('.solve-btn');
      const bookmarkBtn = problemElement.querySelector('.bookmark-btn');
      const answerBtn = problemElement.querySelector('.answer-btn');
      const answerInput = problemElement.querySelector('.answer-input');
      const tags = problemElement.querySelectorAll('.problem-tag');

       answerInput.addEventListener("input", function () {
        this.style.height = "auto";
        this.style.height = this.scrollHeight + "px";
      });

      upvoteBtn.addEventListener('click', () => upvoteProblem(problem.id));
      downvoteBtn.addEventListener('click', () => downvoteProblem(problem.id));
      commentBtn.addEventListener('click', () => toggleAnswers(problem.id));
      if (solveBtn) {
        solveBtn.addEventListener('click', () => toggleSolved(problem.id));
      }
      bookmarkBtn.addEventListener('click', () => bookmarkProblem(problem.id));
      answerBtn.addEventListener('click', () => postAnswer(problem.id, answerInput));

      tags.forEach(tag => {
        tag.addEventListener('click', () => {
          searchInput.value = tag.getAttribute('data-tag');
          filterProblems();
        });
      });

      if (problemElement.querySelector('.answers').style.display === 'block') {
        loadAnswers(problem.id);
      }

      return problemElement;
    }

    // Toggle answers visibility
    function toggleAnswers(problemId) {
      const answersSection = document.getElementById(`answers-${problemId}`);
      const isVisible = answersSection.style.display === 'block';

      answersSection.style.display = isVisible ? 'none' : 'block';

      if (!isVisible) {
        loadAnswers(problemId);
      }
    }

    // Toggle solved status
    async function toggleSolved(problemId) {
      try {
        const problem = problems.find(p => p.id === problemId);
        if (!problem) return;

        const isCurrentlySolved = problem.solved || false;

        await db.collection('problems').doc(problemId).update({
          solved: !isCurrentlySolved,
          solvedAt: !isCurrentlySolved ? firebase.firestore.FieldValue.serverTimestamp() : null
        });

        showToast(isCurrentlySolved ? 'Problem marked as unsolved' : 'Problem marked as solved!', 'success');
      } catch (error) {
        console.error('Error toggling solved status:', error);
        showToast('Error updating solved status', 'error');
      }
    }

    // Load answers for a problem
    function loadAnswers(problemId) {
      const answersContainer = document.getElementById(`answers-container-${problemId}`);
      answersContainer.innerHTML = '<p>Loading answers...</p>';

      db.collection('answers')
        .where('problemId', '==', problemId)
        .onSnapshot(snapshot => {
          answersContainer.innerHTML = '';

          if (snapshot.empty) {
            answersContainer.innerHTML = '<p style="color:white;">No answers yet. Be the first to answer!</p>';
            return;
          }

          snapshot.forEach(doc => {
            const answer = doc.data();
            const answerDate = answer.createdAt ? answer.createdAt.toDate() : new Date();
            const timeAgo = getTimeAgo(answerDate);

            const answerElement = document.createElement('div');
            answerElement.className = 'answer-card';
            answerElement.innerHTML = `
              <div class="answer-header">
                <div class="answer-user">${answer.userName || 'Unknown User'}</div>
                <div class="answer-time">${timeAgo}</div>
              </div>
              <div class="answer-content">
                ${answer.content}
              </div>
            `;

            answersContainer.appendChild(answerElement);
          });
        }, error => {
          console.error('Error loading answers:', error);
          answersContainer.innerHTML = '<p>Error loading answers.</p>';
        });
    }

    // Post a new problem
    function postProblem() {
      const content = problemInput.value.trim();
      const tagsText = tagsInput.value.trim();

      if (!content) {
        showToast('Please describe your problem', 'error');
        return;
      }

      const tags = tagsText.split(',')
        .map(tag => tag.trim())
        .filter(tag => tag !== '')
        .map(tag => tag.startsWith('#') ? tag.substring(1) : tag);

      db.collection('users').doc(currentUser.uid).get()
        .then(userDoc => {
          if (!userDoc.exists) {
            showToast('User data not found', 'error');
            return;
          }

          const userData = userDoc.data();

          return db.collection('problems').add({
            content: content,
            tags: tags,
            userId: currentUser.uid,
            userName: userData.username,
            upvotes: 0,
            downvotes: 0,
            answerCount: 0,
            solved: false,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        })
        .then(() => {
          problemInput.value = '';
          tagsInput.value = '';
          showToast('Problem posted successfully!', 'success');
        })
        .catch(error => {
          console.error('Error posting problem:', error);
          showToast('Error posting problem', 'error');
        });
    }

    // Post an answer to a problem
    function postAnswer(problemId, answerInput) {
      const content = answerInput.value.trim();

      if (!content) {
        showToast('Please write an answer', 'error');
        return;
      }

      db.collection('users').doc(currentUser.uid).get()
        .then(userDoc => {
          if (!userDoc.exists) {
            showToast('User data not found', 'error');
            return;
          }

          const userData = userDoc.data();

          return db.collection('answers').add({
            content: content,
            problemId: problemId,
            userId: currentUser.uid,
            userName: userData.username,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        })
        .then(() => {
          return db.collection('problems').doc(problemId).update({
            answerCount: firebase.firestore.FieldValue.increment(1)
          });
        })
        .then(() => {
          answerInput.value = '';
          showToast('Answer posted successfully!', 'success');
        })
        .catch(error => {
          console.error('Error posting answer:', error);
          showToast('Error posting answer', 'error');
        });
    }

    // Upvote a problem
    async function upvoteProblem(problemId) {
      if (userVotes[problemId]) {
        showToast('You have already voted on this problem', 'error');
        return;
      }

      try {
        await db.collection('votes').add({
          problemId: problemId,
          userId: currentUser.uid,
          voteType: 'upvote',
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        await db.collection('problems').doc(problemId).update({
          upvotes: firebase.firestore.FieldValue.increment(1)
        });

        userVotes[problemId] = 'upvote';
        loadProblems();
        showToast('Upvoted successfully!', 'success');
      } catch (error) {
        console.error('Error upvoting problem:', error);
        showToast('Error upvoting problem', 'error');
      }
    }

    // Downvote a problem
    async function downvoteProblem(problemId) {
      if (userVotes[problemId]) {
        showToast('You have already voted on this problem', 'error');
        return;
      }

      try {
        await db.collection('votes').add({
          problemId: problemId,
          userId: currentUser.uid,
          voteType: 'downvote',
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        await db.collection('problems').doc(problemId).update({
          downvotes: firebase.firestore.FieldValue.increment(1)
        });

        userVotes[problemId] = 'downvote';
        loadProblems();
        showToast('Downvoted successfully!', 'success');
      } catch (error) {
        console.error('Error downvoting problem:', error);
        showToast('Error downvoting problem', 'error');
      }
    }

    // Bookmark a problem
    async function bookmarkProblem(problemId) {
      try {
        const problem = problems.find(p => p.id === problemId);
        if (!problem) return;

        // Check if already bookmarked
        const isBookmarked = userBookmarks[problemId];

        if (isBookmarked) {
          // Remove bookmark
          const bookmarkId = userBookmarks[problemId].id;
          await db.collection('bookmarks').doc(bookmarkId).delete();
          showToast('Sequence removed!', 'success');
        } else {
          // Add bookmark
          await db.collection('bookmarks').add({
            problemId: problemId,
            userId: currentUser.uid,
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            problemData: {
              content: problem.content,
              tags: problem.tags,
              userName: problem.userName,
              createdAt: problem.createdAt
            }
          });
          showToast('Added to Sequence!', 'success');
        }

        // Reload user bookmarks and problems to update UI
        await loadUserBookmarks();
        loadProblems();
      } catch (error) {
        console.error('Error toggling sequence:', error);
        showToast('Error updating sequence', 'error');
      }
    }

    // Filter problems based on search input
    function filterProblems() {
      const searchTerm = searchInput.value.toLowerCase();

      if (!searchTerm) {
        renderProblems();
        return;
      }

      const filteredProblems = problems.filter(problem => {
        return (
          problem.content.toLowerCase().includes(searchTerm) ||
          (problem.tags && problem.tags.some(tag =>
            tag.toLowerCase().includes(searchTerm.replace('#', ''))
          )) ||
          (problem.userName && problem.userName.toLowerCase().includes(searchTerm))
        );
      });

      renderFilteredProblems(filteredProblems);
    }

    // Render filtered problems
    function renderFilteredProblems(filteredProblems) {
      problemFeed.innerHTML = '';

      if (filteredProblems.length === 0) {
        problemFeed.innerHTML = `
          <div class="problem-card">
            <div class="problem-content">
              <p>No problems match your search.</p>
            </div>
          </div>
        `;
        return;
      }

      filteredProblems.forEach(problem => {
        const problemElement = createProblemElement(problem);
        problemFeed.appendChild(problemElement);
      });
    }

    // Get time ago string
    function getTimeAgo(date) {
      const now = new Date();
      const diffInSeconds = Math.floor((now - date) / 1000);

      if (diffInSeconds < 60) {
        return `${diffInSeconds} seconds ago`;
      }

      const diffInMinutes = Math.floor(diffInSeconds / 60);
      if (diffInMinutes < 60) {
        return `${diffInMinutes} minutes ago`;
      }

      const diffInHours = Math.floor(diffInMinutes / 60);
      if (diffInHours < 24) {
        return `${diffInHours} hours ago`;
      }

      const diffInDays = Math.floor(diffInHours / 24);
      if (diffInDays < 30) {
        return `${diffInDays} days ago`;
      }

      return date.toLocaleDateString();
    }

    // Logout user
    function logout() {
      if (confirm('Are you sure you want to log out?')) {
        auth.signOut()
          .then(() => {
            window.location.href = 'indexz.html';
          })
          .catch(error => {
            console.error('Error signing out:', error);
            showToast('Error signing out', 'error');
          });
      }
    }

    // Scroll to top functionality
    const scrollTopBtn = document.getElementById("scrollTopBtn");

    window.onscroll = function () {
      if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
        scrollTopBtn.style.display = "block";
      } else {
        scrollTopBtn.style.display = "none";
      }
    };

    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: "smooth"
      });
    }

    // Initialize the app when the page loads
    document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>

</html>